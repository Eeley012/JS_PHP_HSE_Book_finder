# Отче: Интернет-магазин книг (Book Finder)

## 1. Описание предметной области
Приложение представляет собой прототип книжного интернет-магазина. Предоставляет возможность искать литературу по названию, просматривать список найденных книг и изучать детальную информацию о каждом издании.

В качестве источника данных используется открытое API "Open Library". Цена генерируются на клиенте случайным образом (это всего лишь прототип).

## 2. Архитектура клиента и сервера

### Клиентская часть (Frontend)
Приложение написано на React
* Для навигации используется библиотека `react-router-dom` (v6).
* Для управления состоянием используются хуки React (`useState`, `useEffect`, `useCallback`, `useParams`).

### Серверная часть (Backend)
Собственный бэкенд отсутствует. Приложение взаимодействует с публичным REST API OpenLibrary.org.
* Клиент отправляет асинхронные GET-запросы.
* Сервер возвращает данные в формате JSON.

## 3. Описание реализованных функций

В приложении реализован следующий функционал:
1.  **Авторизация:** Авторизация без логина и пароля, "гостевой" вход для студентов.
2.  **Поиск:** Поле ввода для поиска книг по названию.
3.  **Пагинация:** Реализована кнопка "Загрузить больше", которая подгружает следующую порцию книг к уже существующему списку (столько, сколько это возможно).
4.  **Детальный просмотр:** Отдельная страница для каждой книги с отображением обложки, полного описания, года издания и цены (если данные предоставлены API).
5.  **Обработка состояний:** Интерфейс реагирует на процесс загрузки (показывает сообщение "Загрузка...") и на ошибки сети ("Ошибка соединения").

## 4. Логика маршрутизации

Маршрутизация построена на базе `BrowserRouter`. Основные маршруты:

* `/` — Главная страница (доступна всем).
* `/login` — Страница входа. Принимает функцию авторизации от родителя.
* `/books` — Страница каталога (Protected Route). Если пользователь не авторизован (`isAuth === false`), компонент `<Navigate />` автоматически перенаправляет его на `/login`.
* `/books/works/:id` — Динамический маршрут для страницы товара. Параметр `:id` используется для запроса данных конкретной книги.

Для переходов между страницами используется компонент `<Link>`, что предотвращает перезагрузку страницы и сброс состояния приложения.

## 5. Описание хука useServerGoods

Взаимодействие с API вынесено в отдельный кастомный хук `useServerGoods`. Это позволяет отделить логику получения данных от логики отображения (UI).

**Как он работает:**
1.  Хранит состояния: список книг, флаг загрузки, ошибка, флаг наличия следующих страниц.
2.  Предоставляет метод `loadGoods(query, page)`.
3.  Использует `useCallback`, чтобы ссылка на функцию не менялась при ререндерах.
4.  Реализует логику объединения данных: если запрашивается 1-я страница, массив перезаписывается; если последующие — новые данные добавляются в конец текущего массива.

Хук возвращает объект с данными и методами, который затем используется в компоненте `App.js`.

## 6. Примеры запросов к API

Приложение использует два основных эндпоинта OpenLibrary:

**1. Поиск книг (список):**
`GET https://openlibrary.org/search.json?title={название}&page={номер}`
* Используется для получения списка книг по запросу.
* Из ответа берутся поля: `key` (id), `title`, `author_name`, `first_publish_year`.

**2. Данные одной книги:**
`GET https://openlibrary.org/works/{id}.json`
* Используется на детальной странице.
* В URL подставляется ID, полученный через `useParams` (с добавлением префикса `/works/` при необходимости).

## 7. Выводы

При разработке понял, как использовать и осуществлять:
* Функциональнык компоненты и хуки.
* Клиентскую маршрутизацию и защиту маршрутов.
* Асинхронное взаимодействие с внешним API.
* Обработку ошибок и состояние загрузки.
* Сборку проекта.
